<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Readora - Authors</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700&family=Montserrat:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary: #4a6fa5; --secondary: #166088; --accent: #4fc3a1; --accent-dark: #3a9378;
            --light: #f8f9fa; --dark: #2d3436; --darker: #1e2224; --danger: #dc3545;
            --success: #28a745; --warning: #ffc107; --gray: #8a8a8a; --light-gray: #e0e0e0;
        }
        body { background-color: #f5f7f9; color: var(--dark); line-height: 1.6; font-family: 'Montserrat', sans-serif; }
        h1, h2, h3, h4, h5 { font-family: 'Merriweather', serif; font-weight: 700; }
        .container { width: 100%; max-width: 1200px; margin: 0 auto; padding: 0 15px; }

        header { background: linear-gradient(to right, var(--darker), var(--dark)); color: white; padding: 1rem 0; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); position: sticky; top: 0; z-index: 100; }
        .header-content { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.8rem; font-weight: 700; display: flex; align-items: center; text-decoration: none; color: white;}
        .logo i { margin-right: 10px; color: var(--accent); font-size: 2.2rem; }
        nav { display: flex; align-items: center; }
        nav ul { display: flex; list-style: none; }
        nav ul li { margin-left: 20px; }
        nav ul li a { color: white; text-decoration: none; font-weight: 500; padding: 8px 15px; border-radius: 4px; transition: all 0.3s; }
        nav ul li a:hover, nav ul li a.active { background: rgba(255, 255, 255, 0.15); color: var(--accent); }
        .header-right-icons { display: flex; align-items: center; gap: 25px; }
        .cart-icon { position: relative; cursor: pointer; font-size: 1.5rem; }
        .cart-badge { position: absolute; top: -8px; right: -12px; background: var(--danger); color: white; width: 22px; height: 22px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 12px; font-weight: 600; }
        .menu-toggle { display: none; }
        nav ul li.dropdown { position: relative; }
        nav ul li.dropdown .dropdown-menu { display: none; position: absolute; top: 100%; left: 0; background: var(--darker); list-style: none; padding: 10px 0; margin: 0; border-radius: 4px; box-shadow: 0 8px 16px rgba(0,0,0,0.3); min-width: 160px; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0.3s ease; z-index: 1001;}
        nav ul li.dropdown:hover .dropdown-menu { display: block; opacity: 1; visibility: visible; }
        nav ul li.dropdown .dropdown-menu li { margin: 0; }
        nav ul li.dropdown .dropdown-menu li a { padding: 10px 20px; display: block; width: 100%; text-align: left; white-space: nowrap; }
        nav ul li.dropdown .dropdown-menu li a:hover { background: rgba(255, 255, 255, 0.1); color: var(--accent); }
        nav ul li a .fa-caret-down { margin-left: 5px; font-size: 0.8em; }

        .main-content { padding: 4rem 0; }
        .section-title { text-align: center; margin-bottom: 3rem; position: relative; font-size: 2.5rem; }
        .section-title:after { content: ''; display: block; width: 80px; height: 4px; background: var(--accent); margin: 15px auto; border-radius: 2px; }

        .authors-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 2.5rem; justify-content: center; }
        .author-card { text-align: center; cursor: pointer; transition: transform 0.3s ease; }
        .author-card:hover { transform: translateY(-10px); }
        .author-image-wrapper { width: 150px; height: 150px; border-radius: 50%; margin: 0 auto 1rem; overflow: hidden; position: relative; border: 5px solid white; box-shadow: 0 10px 25px rgba(0,0,0,0.1); transition: all 0.4s ease; }
        .author-card:hover .author-image-wrapper { transform: scale(1.05); box-shadow: 0 0 25px var(--accent); }
        .author-image-wrapper img { width: 100%; height: 100%; object-fit: cover; }
        .author-name { font-family: 'Merriweather', serif; font-weight: 700; font-size: 1.1rem; }

        #author-details-section { display: none; margin-top: 4rem; padding: 3rem; background: white; border-radius: 15px; box-shadow: 0 15px 40px rgba(0,0,0,0.1); scroll-margin-top: 100px; }
        .author-details-content { display: grid; grid-template-columns: 200px 1fr; gap: 2rem; align-items: flex-start; }
        .author-details-img { width: 200px; height: 200px; border-radius: 50%; object-fit: cover; border: 6px solid var(--light); }
        .author-bio h3 { font-size: 2rem; margin-bottom: 1rem; }
        .author-bio p { line-height: 1.8; margin-bottom: 1.5rem; text-align: justify; }
        .author-books-title { margin-top: 3rem; font-size: 1.8rem; text-align: center; position: relative; padding-bottom: 15px; }
        .author-books-title:after { content: ''; display: block; width: 60px; height: 3px; background: var(--accent); margin: 10px auto 0; }
        
        /* Standard Book Card Styles */
        .books-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 30px; margin-top: 30px;}
        .book-card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08); transition: all 0.3s ease; position: relative; display: flex; flex-direction: column; }
        .book-card:hover { transform: translateY(-8px); box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15); }
        .book-img { aspect-ratio: 2 / 3; overflow: hidden; position: relative; background-color: #f9f9f9; }
        .book-img img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s; }
        .book-card:hover .book-img img { transform: scale(1.08); }
        .quick-view { position: absolute; bottom: 0; left: 0; width: 100%; background-color: rgba(79, 195, 161, 0.9); color: white; text-align: center; padding: 12px 5px; font-weight: 600; font-size: 0.9rem; transform: translateY(100%); opacity: 0; transition: transform 0.3s ease, opacity 0.3s ease; z-index: 3; }
        .book-card:hover .quick-view { transform: translateY(0); opacity: 1; }
        .book-info { padding: 15px; display: flex; flex-direction: column; flex-grow: 1; text-align: center; }
        .book-title { font-size: 18px; font-weight: 700; margin-bottom: 8px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .book-author { color: var(--gray); margin-bottom: 12px; font-size: 14px; }
        .book-price { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 8px; margin-bottom: 10px; }
        .current-price { font-size: 20px; font-weight: 700; color: var(--secondary); }
        .original-price { text-decoration: line-through; color: var(--gray); font-size: 14px; }
        .discount { color: var(--danger); font-weight: 600; font-size: 14px; }
        .book-actions { display: flex; justify-content: space-between; margin-top: auto; padding-top: 15px; gap: 10px; }
        .btn { padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.3s; display: inline-flex; align-items: center; justify-content: center; min-height: 40px; flex-grow: 1; }
        .btn.added { background-color: var(--success); color: white; }
        .btn i { margin-right: 8px; font-size: 14px; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: var(--secondary); transform: translateY(-2px); }
        .btn-outline { background: transparent; border: 2px solid var(--primary); color: var(--primary); }
        .btn-outline:hover { background: var(--primary); color: white; }
        .no-books { text-align: center; grid-column: 1 / -1; padding: 2rem; font-size: 1.2rem; color: var(--gray); }

        /* Modal, Footer, and Responsive Styles */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: 1000; overflow-y: auto; }
        .modal-content { background: white; margin: 50px auto; border-radius: 12px; max-width: 800px; width: 90%; animation: modalFade 0.4s; overflow: hidden; position: relative; display: flex; flex-direction: column; }
        @keyframes modalFade { from { opacity: 0; transform: translateY(-60px); } to { opacity: 1; transform: translateY(0); } }
        .modal-header { padding: 20px; border-bottom: 1px solid var(--light-gray); display: flex; justify-content: space-between; align-items: center; background: var(--light); flex-shrink: 0; }
        .close-modal, .close-cart-modal { font-size: 28px; cursor: pointer; color: var(--gray); transition: color 0.3s; position: absolute; top: 15px; right: 20px; z-index: 10; }
        .close-modal:hover, .close-cart-modal:hover { color: var(--dark); }
        .modal-body { padding: 30px; overflow-y: auto; flex-grow: 1; }
        .book-details { display: grid; grid-template-columns: 1fr 2fr; gap: 30px; text-align: justify; }
        .book-details-img img { width: 100%; height: auto; display: block; border-radius: 8px; }
        .book-details-info h2 { font-size: 28px; }
        .cart-item { display: flex; align-items: center; gap: 15px; border-bottom: 1px solid var(--light-gray); padding: 15px 0; }
        .cart-item:last-child { border-bottom: none; }
        .cart-item-img { width: 80px; height: 120px; object-fit: cover; border-radius: 4px; }
        .cart-item-info { flex-grow: 1; }
        .cart-item-price { font-weight: 600; color: var(--secondary); }
        .cart-item-quantity { display: flex; align-items: center; gap: 10px; }
        .quantity-btn { width: 30px; height: 30px; border: 1px solid var(--light-gray); background: white; cursor: pointer; border-radius: 50%; }
        .cart-item-remove { color: var(--danger); cursor: pointer; font-size: 1.2rem; }
        .cart-empty-message { text-align: center; padding: 50px 0; color: var(--gray); }
        .cart-footer { padding: 20px; border-top: 1px solid var(--light-gray); background: var(--light); display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px; flex-shrink: 0; }
        .cart-total { font-size: 1.2rem; }
        .btn-large { padding: 15px 25px; font-size: 16px; }
        
        /* Footer */
        footer { background: var(--darker); color: white; padding: 60px 0 30px; }
        .footer-content { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; margin-bottom: 30px; }
        .footer-logo { font-size: 1.8rem; font-weight: 700; margin-bottom: 20px; display: flex; align-items: center; }
        .footer-logo i { margin-right: 10px; color: var(--accent); }
        .footer-about p { margin-bottom: 20px; line-height: 1.8; }
        .social-links { display: flex; gap: 15px; margin-top: 20px; }
        .social-link { display: inline-flex; align-items: center; justify-content: center; width: 40px; height: 40px; background: rgba(255, 255, 255, 0.1); border-radius: 50%; color: white; transition: all 0.3s; }
        .social-link:hover { background: var(--accent); transform: translateY(-3px); }
        .footer-heading { font-size: 1.2rem; margin-bottom: 20px; position: relative; padding-bottom: 10px; }
        .footer-heading:after { content: ''; position: absolute; left: 0; bottom: 0; width: 40px; height: 3px; background: var(--accent); }
        .footer-links ul { list-style: none; }
        .footer-links ul li { margin-bottom: 10px; }
        .footer-links ul li a { color: rgba(255, 255, 255, 0.7); text-decoration: none; transition: color 0.3s; }
        .footer-links ul li a:hover { color: var(--accent); }
        .contact-info p { display: flex; align-items: center; margin-bottom: 15px; }
        .contact-info i { margin-right: 10px; color: var(--accent); }
        .copyright { text-align: center; padding-top: 30px; border-top: 1px solid rgba(255, 255, 255, 0.1); }
        
        @media (max-width: 768px) {
            .menu-toggle { display: flex; flex-direction: column; justify-content: space-around; width: 30px; height: 25px; background: transparent; border: none; cursor: pointer; padding: 0; z-index: 1001;}
            .menu-toggle span { width: 100%; height: 3px; background-color: white; border-radius: 5px; transition: all 0.3s linear;}
            nav { position: fixed; top: 0; right: -300px; width: 300px; height: 100vh; background: var(--darker); box-shadow: -5px 0 15px rgba(0,0,0,0.2); transition: right 0.3s ease-in-out; z-index: 1000; padding-top: 80px; flex-direction: column; align-items: stretch; }
            nav.active { right: 0; }
            nav ul { flex-direction: column; padding: 0; width: 100%; text-align: center; }
            nav ul li { margin: 0; }
            nav ul li a { display: block; padding: 18px 20px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
            .author-details-content { grid-template-columns: 1fr; text-align: center; }
            .author-details-img { margin: 0 auto; }
            .books-grid { grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); }
            .book-details { grid-template-columns: 1fr; }
            .footer-content { grid-template-columns: 1fr; text-align: center; gap: 40px; }
            .footer-heading:after { left: 50%; transform: translateX(-50%); }
            .contact-info p, .social-links { justify-content: center; }

            /* --- NEW: CSS for Mobile Dropdowns --- */
            nav ul li.dropdown .dropdown-menu {
                display: block;
                position: static;
                background: var(--dark);
                box-shadow: none;
                padding: 0;
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.3s ease-in-out;
            }
            nav ul li.dropdown.open .dropdown-menu {
                max-height: 500px; /* Adjust as needed */
            }
        }

        @media (max-width: 480px) {
            .authors-grid {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 20px;
            }
            .author-image-wrapper {
                width: 80px;
                height: 80px;
                margin-bottom: 0.5rem;
            }
            .author-name {
                font-size: 0.8rem;
                line-height: 1.2;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <a href="index(modify).html" class="logo">
                <i class="fas fa-book-open"></i>
                <span>Readora</span>
            </a>
            <nav id="main-nav">
                <ul>
                    <li><a href="index(modify).html">Home</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="index(modify).html#search">Search</a></li>
                    <li><a href="index(modify).html#categories">Categories</a></li>
                    <li class="dropdown">
                        <a href="#">Collections <i class="fas fa-caret-down"></i></a>
                        <ul class="dropdown-menu">
                            <li><a href="trending.html">Trending</a></li>
                            <li><a href="bestselling.html">Bestselling</a></li>
                        </ul>
                    </li>
                     <li class="dropdown">
                        <a href="#">Explore <i class="fas fa-caret-down"></i></a>
                        <ul class="dropdown-menu">
                            <li><a href="publications.html">Publications</a></li>
                            <li><a href="authors.html">Authors</a></li>
                        </ul>
                    </li>
                    <li><a href="index(modify).html#footer">Contact</a></li>
                </ul>
            </nav>
            <div class="header-right-icons">
                <div class="cart-icon" id="cart-icon">
                    <i class="fas fa-shopping-cart"></i>
                    <span id="cart-badge" class="cart-badge">0</span>
                </div>
                <button class="menu-toggle" id="menu-toggle">
                    <span></span><span></span><span></span>
                </button>
            </div>
        </div>
    </header>

    <main class="main-content">
        <section id="authors">
            <div class="container">
                <h2 class="section-title">Our Esteemed Authors</h2>
                <div class="authors-grid" id="authors-grid-container"></div>
            </div>
        </section>

        <section id="author-details-section">
            <div class="container" id="author-details-container"></div>
        </section>
    </main>

    <div id="book-details-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Book Details</h2>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body" id="book-details-content"></div>
        </div>
    </div>
    
    <div id="cart-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Your Shopping Cart</h2>
                <span class="close-cart-modal">&times;</span>
            </div>
            <div class="modal-body" id="cart-items-container"></div>
            <div class="cart-footer">
                <button id="empty-cart-btn" class="btn" style="background-color: var(--danger); color: white; margin-right: auto;">Empty Cart</button>
                <div class="cart-total">
                    <strong>Total:</strong> <span id="cart-total-price">₹0</span>
                </div>
                <button id="checkout-btn" class="btn btn-primary btn-large">
                    <i class="fab fa-facebook-messenger"></i> FB Chat
                </button>
            </div>
        </div>
    </div>

    <footer id="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-about">
                    <div class="footer-logo">
                        <i class="fas fa-book-open"></i>
                        <span>Readora</span>
                    </div>
                    <p>Your one-stop destination for all books. We offer a wide selection of books across all genres at competitive prices.</p>
                    <div class="social-links">
                        <a href="https://www.facebook.com/share/17JzLNsUGm/" class="social-link"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://www.instagram.com/readora_books/" class="social-link"><i class="fab fa-instagram"></i></a>
                        <a href="tel:+919163621264" class="social-link"><i class="fas fa-phone"></i></a>
                        <a href="mailto:readora07@gmail.com" class="social-link"><i class="fas fa-envelope"></i></a>
                    </div>
                </div>
                <div class="footer-links">
                    <h3 class="footer-heading">Quick Links</h3>
                    <ul>
                        <li><a href="index(modify).html">Home</a></li>
                        <li><a href="about.html">About</a></li>                        
                        <li><a href="index(modify).html#search">Search</a></li>
                        <li><a href="index(modify).html#categories">Categories</a></li>
                        <li><a href="index(modify).html#footer">Contact</a></li>
                    </ul>
                </div>
                <div class="contact-info">
                    <h3 class="footer-heading">Contact Us</h3>
                    <p><i class="fas fa-map-marker-alt"></i> Sajirhat,Madhyamgram,Kolkata-700130</p>
                    <p><i class="fas fa-phone"></i> +91 9163621264</p>
                    <p><i class="fas fa-envelope"></i>readora07@gmail.com</p>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2020 Readora. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        const authorDetails = {
            "তারাশঙ্কর বন্দ্যোপাধ্যায়": { image: "https://upload.wikimedia.org/wikipedia/commons/d/d9/Tarasankar_Bandyopadhyay.jpg", bio: "Tarasankar Bandyopadhyay (23 July 1898 – 14 September 1971) was an Indian novelist who wrote in the Bengali language. He wrote 65 novels, 53-story-books, 12 plays, 4 essay-books, 4 autobiographies, 2 travel stories and composed several songs. He was awarded Rabindra Puraskar, Sahitya Akademi Award, Jnanpith Award, and Padma Bhushan." },
            "শরৎচন্দ্র চট্টোপাধ্যায়": { image: "https://upload.wikimedia.org/wikipedia/commons/8/8a/Sarat_Chandra_Chattopadhyay_portrait.jpg", bio: "Sarat Chandra Chattopadhyay (15 September 1876 – 16 January 1938) was a Bengali novelist and short story writer of the early 20th century. Most of his works deal with the lifestyle, tragedy and struggle of the village people and the contemporary social practices that prevailed in Bengal." },
            "বিভূতিভূষণ বন্দ্যোপাধ্যায়": { image: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Bibhutibhushan_Bandopadhyay_Autobiography.jpg/440px-Bibhutibhushan_Bandopadhyay_Autobiography.jpg", bio: "Bibhutibhushan Bandyopadhyay (12 September 1894 – 1 November 1950) was an Indian writer in the Bengali language. His best known work is the autobiographical novel, Pather Panchali (The Song of the Road), which was later adapted into a film of the same name by Satyajit Ray." },
            "রবীন্দ্রনাথ ঠাকুর": { image: "https://upload.wikimedia.org/wikipedia/commons/d/d1/Rabindranath_Tagore.jpg", bio: "Rabindranath Tagore (7 May 1861 – 7 August 1941) was a Bengali polymath who worked as a poet, writer, playwright, composer, philosopher, social reformer and painter. He reshaped Bengali literature and music, as well as Indian art with Contextual Modernism in the late 19th and early 20th centuries. Author of the 'profoundly sensitive, fresh and beautiful verse' of Gitanjali, he became in 1913 the first non-European to win the Nobel Prize in Literature." },
            "বঙ্কিমচন্দ্র চট্টোপাধ্যায়": { image: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d_Bankim_Chandra_Chatterjee.jpg/440px-Bankim_Chandra_Chatterjee.jpg", bio: "Bankim Chandra Chatterjee (26 June 1838 – 8 April 1894) was an Indian novelist, poet and journalist. He was the composer of Vande Mataram, originally in Sanskrit, personifying India as a mother goddess and inspiring activists during the Indian Independence Movement." },
            "অদ্বৈত মল্লবর্মণ": { image: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Advaita_Mallabarman.jpg/440px-Advaita_Mallabarman.jpg", bio: "Advaita Mallabarman (1 January 1914 – 16 April 1951) was a Bengali Indian writer. He is mostly known for his novel Titash Ekti Nadir Naam (A River Called Titash), which was later adapted into a film of the same name by Ritwik Ghatak." },
            "বিজন ভট্টাচার্য": { image: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a8/Bijon_Bhattacharya_in_Meghe_Dhaka_Tara.jpg/440px-Bijon_Bhattacharya_in_Meghe_Dhaka_Tara.jpg", bio: "Bijon Bhattacharya (17 July 1917 – 19 January 1978) was an Indian theatre and film actor from Calcutta. He was one of the pioneers of the Group Theatre movement in India, and was a leading figure in the Indian People's Theatre Association (IPTA)." },
            "মাইকেল মধুসূদন দত্ত": { image: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/80/Michael_Madhusudan_Dutt.jpg/440px-Michael_Madhusudan_Dutt.jpg", bio: "Michael Madhusudan Dutt (25 January 1824 – 29 June 1873) was a Bengali poet, writer and dramatist. He is a pioneer of Bengali drama. His famous work Meghnadbad Kavya is a tragic epic. It consists of nine cantos and is exceptional in Bengali literature both in terms of style and content." },
            "কৃষ্ণভাবিনী দাস": { image: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Krishnabhabini_Das.gif/440px-Krishnabhabini_Das.gif", bio: "Krishnabhabini Das (1864 – 1919) was a Bengali writer and a women's rights activist. She was one of the earliest Bengali women to travel to England and write a book about her experiences. Her book 'England-e Bangamahila' (A Bengali Woman in England) provides a unique perspective on Victorian society." }
        };

        const authorNameMap = {
            "বিভূতিভূষন বন্দ্যোপাধ্যায়": "বিভূতিভূষণ বন্দ্যোপাধ্যায়"
        };

        let allBooks = [];
        let cart = [];

        function init() {
            allBooks = JSON.parse(localStorage.getItem('readoraBooks')) || [];
            cart = JSON.parse(localStorage.getItem('readoraCart')) || [];

            setupEventListeners();
            populateAuthors();
            updateCartBadge();
        }
        
        function setupEventListeners() {
            const menuToggle = document.getElementById('menu-toggle');
            const mainNav = document.getElementById('main-nav');
            const cartIcon = document.getElementById('cart-icon');
            const cartModal = document.getElementById('cart-modal');
            const bookDetailsModal = document.getElementById('book-details-modal');
            const emptyCartBtn = document.getElementById('empty-cart-btn');

            if (menuToggle) menuToggle.addEventListener('click', () => {
                mainNav.classList.toggle('active');
                menuToggle.classList.toggle('active');
            });

            // --- NEW: Event listener for mobile dropdowns ---
            if (mainNav) {
                mainNav.querySelectorAll('.dropdown > a').forEach(link => {
                    link.addEventListener('click', function(e) {
                        if (window.innerWidth <= 768) { 
                            e.preventDefault(); 
                            this.parentElement.classList.toggle('open');
                        }
                    });
                });
            }

            if (cartIcon) cartIcon.addEventListener('click', displayCart);
            if (emptyCartBtn) emptyCartBtn.addEventListener('click', emptyCart);

            document.querySelector('.close-cart-modal')?.addEventListener('click', () => cartModal.style.display = 'none');
            document.querySelector('.close-modal')?.addEventListener('click', () => bookDetailsModal.style.display = 'none');
            window.addEventListener('click', (e) => {
                if (e.target === cartModal) cartModal.style.display = 'none';
                if (e.target === bookDetailsModal) bookDetailsModal.style.display = 'none';
            });
        }

        function populateAuthors() {
            const authorsGridContainer = document.getElementById('authors-grid-container');
            if (!authorsGridContainer) return;
            
            const normalizedAuthors = allBooks.map(book => authorNameMap[book.author] || book.author);
            const uniqueAuthors = [...new Set(normalizedAuthors)];
            
            authorsGridContainer.innerHTML = '';
            uniqueAuthors.forEach(authorName => {
                const author = authorDetails[authorName] || { image: '' };
                const authorCard = document.createElement('div');
                authorCard.className = 'author-card';
                authorCard.innerHTML = `
                    <div class="author-image-wrapper">
                        <img src="${author.image}" alt="${authorName}" onerror="this.onerror=null;this.src='https://placehold.co/150x150/f0f0f0/cccccc?text=?';">
                    </div>
                    <h3 class="author-name">${authorName}</h3>`;
                authorCard.addEventListener('click', () => showAuthorDetails(authorName));
                authorsGridContainer.appendChild(authorCard);
            });
        }

        function showAuthorDetails(authorName) {
            const authorDetailsSection = document.getElementById('author-details-section');
            const authorDetailsContainer = document.getElementById('author-details-container');
            const author = authorDetails[authorName] || { image: '', bio: 'No biography available.' };
            const authorBooks = allBooks.filter(b => (authorNameMap[b.author] || b.author) === authorName);

            authorDetailsContainer.innerHTML = `
                <div class="author-details-content">
                    <img src="${author.image}" alt="${authorName}" class="author-details-img" onerror="this.onerror=null;this.src='https://placehold.co/200x200/f0f0f0/cccccc?text=?';">
                    <div class="author-bio">
                        <h3>${authorName}</h3>
                        <p>${author.bio}</p>
                    </div>
                </div>
                <h3 class="author-books-title">Books by ${authorName}</h3>`;
            
            const booksGrid = document.createElement('div');
            booksGrid.className = 'books-grid';
            
            if (authorBooks.length > 0) {
                authorBooks.forEach(book => booksGrid.appendChild(createBookCard(book)));
            } else {
                booksGrid.innerHTML = '<p class="no-books">No books by this author are currently available.</p>';
            }
            authorDetailsContainer.appendChild(booksGrid);
            
            updateAddToCartButtonsUI();
            authorDetailsSection.style.display = 'block';
            authorDetailsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function createBookCard(book) {
            const card = document.createElement('div');
            card.className = 'book-card';
            const discount = book.originalPrice ? Math.round(((book.originalPrice - book.price) / book.originalPrice) * 100) : 0;
            card.innerHTML = `
                <div class="book-img">
                    <img src="${book.frontImg}" alt="${book.title}" onerror="this.onerror=null;this.src='https://via.placeholder.com/250x375.png?text=No+Image';">
                    <div class="quick-view">${book.condition} | ${book.category}</div>
                </div>
                <div class="book-info">
                    <h3 class="book-title">${book.title}</h3>
                    <div class="book-price">
                        <span class="current-price">₹${book.price.toFixed(2).replace(/\.00$/, '')}</span>
                        ${book.originalPrice ? `<span class="original-price">₹${book.originalPrice.toFixed(2).replace(/\.00$/, '')}</span>` : ''}
                        ${discount > 0 ? `<span class="discount">${discount}% off</span>` : ''}
                    </div>
                    <div class="book-actions">
                        <button class="btn btn-outline view-details" data-id="${book.id}"><i class="fas fa-eye"></i> Details</button>
                        <button class="btn btn-primary add-to-cart-btn" data-id="${book.id}"><i class="fas fa-cart-plus"></i> Add to Cart</button>
                    </div>
                </div>`;
            card.querySelector('.view-details').addEventListener('click', () => showBookDetails(book.id));
            card.querySelector('.add-to-cart-btn').addEventListener('click', () => toggleCartItem(book.id));
            return card;
        }

        function showBookDetails(bookId) {
            const bookDetailsModal = document.getElementById('book-details-modal');
            const contentEl = document.getElementById('book-details-content');
            const book = allBooks.find(b => b.id === bookId);
            if (!book) return;
            
            contentEl.innerHTML = `
                <div class="book-details">
                    <div class="book-details-img"><img src="${book.frontImg}" alt="${book.title}" onerror="this.onerror=null;this.src='https://via.placeholder.com/250x375.png?text=No+Image';"></div>
                    <div class="book-details-info">
                        <h2>${book.title}</h2>
                        <p style="color: var(--gray); font-size: 1.1rem; margin-top: -10px;">by ${book.author}</p>
                        <p style="font-size: 1.5rem; font-weight: 700; color: var(--secondary); margin: 1rem 0;">₹${book.price.toFixed(2).replace(/\.00$/, '')}</p>
                        <p>${book.description || 'No description available.'}</p>
                    </div>
                </div>`;
            bookDetailsModal.style.display = 'block';
        }
        
        // --- Cart Logic (Consistent across all pages) ---
        function saveCartToStorage() {
            localStorage.setItem('readoraCart', JSON.stringify(cart));
        }

        function updateCartBadge() {
            const cartBadge = document.getElementById('cart-badge');
            if(cartBadge) cartBadge.textContent = cart.length;
        }

        function toggleCartItem(bookId) {
            const itemIndex = cart.findIndex(item => item.id === bookId);
            if (itemIndex > -1) {
                cart.splice(itemIndex, 1);
            } else {
                const book = allBooks.find(b => b.id === bookId);
                if (book) cart.push({ ...book, quantity: 1 });
            }
            saveCartToStorage();
            updateCartBadge();
            updateAddToCartButtonsUI();
        }

        function updateAddToCartButtonsUI() {
            document.querySelectorAll('.add-to-cart-btn').forEach(btn => {
                const bookId = parseInt(btn.dataset.id);
                if (cart.some(item => item.id === bookId)) {
                    btn.innerHTML = `<i class="fas fa-check"></i> Added`;
                    btn.classList.add('added');
                } else {
                    btn.innerHTML = `<i class="fas fa-cart-plus"></i> Add to Cart`;
                    btn.classList.remove('added');
                }
            });
        }
        
        function displayCart() {
            const cartModal = document.getElementById('cart-modal');
            const container = document.getElementById('cart-items-container');
            container.innerHTML = '';
            const emptyCartBtn = document.getElementById('empty-cart-btn');

            if (cart.length === 0) {
                container.innerHTML = `<p class="cart-empty-message">Your cart is empty.</p>`;
                if (emptyCartBtn) emptyCartBtn.style.display = 'none';
            } else {
                if (emptyCartBtn) emptyCartBtn.style.display = 'inline-flex';
                cart.forEach(item => {
                    const itemEl = document.createElement('div');
                    itemEl.className = 'cart-item';
                    itemEl.innerHTML = `
                        <img src="${item.frontImg}" alt="${item.title}" class="cart-item-img">
                        <div class="cart-item-info">
                            <h4>${item.title}</h4>
                            <p class="cart-item-price">₹${item.price.toFixed(2).replace(/\.00$/, '')}</p>
                        </div>
                        <div class="cart-item-quantity">
                            <button class="quantity-btn" data-id="${item.id}" data-change="-1">-</button>
                            <span>${item.quantity}</span>
                            <button class="quantity-btn" data-id="${item.id}" data-change="1">+</button>
                        </div>
                        <i class="fas fa-trash cart-item-remove" data-id="${item.id}"></i>`;
                    container.appendChild(itemEl);
                });
            }
            updateCartTotal();
            addCartItemEventListeners(container);
            cartModal.style.display = 'block';
        }

        function addCartItemEventListeners(container) {
            container.querySelectorAll('.quantity-btn').forEach(btn => {
                btn.addEventListener('click', e => {
                    updateQuantity(parseInt(e.target.dataset.id), parseInt(e.target.dataset.change));
                });
            });
            container.querySelectorAll('.cart-item-remove').forEach(btn => {
                btn.addEventListener('click', e => {
                    toggleCartItem(parseInt(e.target.dataset.id));
                    displayCart();
                });
            });
        }
        
        function updateQuantity(bookId, change) {
            const item = cart.find(i => i.id === bookId);
            if(item) {
                item.quantity += change;
                if(item.quantity <= 0) {
                    toggleCartItem(bookId);
                } else {
                    saveCartToStorage();
                }
                displayCart();
            }
        }
        
        function emptyCart() {
            if (confirm("Are you sure you want to empty your cart?")) {
                cart = [];
                saveCartToStorage();
                updateCartBadge();
                displayCart();
                updateAddToCartButtonsUI();
            }
        }

        function updateCartTotal() {
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            document.getElementById('cart-total-price').textContent = `₹${total.toFixed(2).replace(/\.00$/, '')}`;
        }

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>